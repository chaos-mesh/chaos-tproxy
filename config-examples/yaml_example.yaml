proxy_ports: [80, 443, 8080] # proxy for all ports bigger than 1024 if empty
plugin_path: /     # the directory path to load plugin files (xxx.wasm), `/etc/rs-tproxy/plugins` by default
rules:
  - target: Request
    selector:
      port: 8080
      path: /example # match all path starts with "/example"
      method: GET
    actions:
      delay: 10s
      replace:
        body:
          contents:
            type: TEXT
            value: '{"name": "Chaos Mesh", "message": "Hello!"}'
        # contents:
        #   type: BASE64
        #   value: 'eyJuYW1lIjogIkNoYW9zIE1lc2giLCAibWVzc2FnZSI6ICJIZWxsbyEifQ=='
      patch:
        queries:
        - [foo, bar]
        - [foo, other]
        body:
          contents:
            type: JSON
            value: '{"message": "Hi!"}'
      plugins:
        - xxx # plugin name, load from file `<plugin_path>/xxx.wasm`

  - target: Response
    selector:
      port: 80
      path: /example
      method: GET
      code: 404
    actions:
      abort: true
